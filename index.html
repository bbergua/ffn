
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ffn - Financial Functions for Python &#8212; ffn 0.3.6 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/klink.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation Guide" href="install.html" />
         
        <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">
        
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Droid+Sans+Mono:400,500,700' rel='stylesheet' type='text/css'>
    
  </head><body>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="ffn-financial-functions-for-python">
<h1>ffn - Financial Functions for Python<a class="headerlink" href="#ffn-financial-functions-for-python" title="Permalink to this heading">¶</a></h1>
<p>ffn is a library that contains many useful functions for those who work in <strong>quantitative
finance</strong>. It stands on the shoulders of giants (Pandas, Numpy, Scipy, etc.) and provides
a vast array of utilities, from performance measurement and evaluation to
graphing and common data transformations.</p>
<p>If you are looking for a full backtesting framework, please check out <a class="reference external" href="https://github.com/pmorissette/bt">bt</a>. bt is built atop ffn and makes it easy
and fast to backtest quantitative strategies.</p>
<div class="section" id="a-brief-introduction">
<h2>A Brief Introduction<a class="headerlink" href="#a-brief-introduction" title="Permalink to this heading">¶</a></h2>
<p>Here is a brief introduction to the capabilities of ffn:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ffn</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># download price data from Yahoo! Finance. By default,</span>
<span class="c1"># the Adj. Close will be used.</span>
<span class="n">prices</span> <span class="o">=</span> <span class="n">ffn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;aapl,msft&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2010-01-01&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># let&#39;s compare the relative performance of each stock</span>
<span class="c1"># we will rebase here to get a common starting point for both securities</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">prices</span><span class="o">.</span><span class="n">rebase</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
<a class="pynb reference internal image-reference" href="_images/intro_3_0.png"><img alt="_images/intro_3_0.png" class="pynb" src="_images/intro_3_0.png" style="width: 606px; height: 305px;" /></a>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># now what do the return distributions look like?</span>
<span class="n">returns</span> <span class="o">=</span> <span class="n">prices</span><span class="o">.</span><span class="n">to_returns</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">returns</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
<a class="pynb reference internal image-reference" href="_images/intro_4_0.png"><img alt="_images/intro_4_0.png" class="pynb" src="_images/intro_4_0.png" style="width: 611px; height: 320px;" /></a>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ok now what about some performance metrics?</span>
<span class="n">stats</span> <span class="o">=</span> <span class="n">prices</span><span class="o">.</span><span class="n">calc_stats</span><span class="p">()</span>
<span class="n">stats</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
<div class="pynb-result highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">Stat</span>                 <span class="n">aapl</span>        <span class="n">msft</span>
 <span class="o">-------------------</span>  <span class="o">----------</span>  <span class="o">----------</span>
 <span class="n">Start</span>                <span class="mi">2010</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">04</span>  <span class="mi">2010</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">04</span>
 <span class="n">End</span>                  <span class="mi">2022</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">30</span>  <span class="mi">2022</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">30</span>
 <span class="n">Risk</span><span class="o">-</span><span class="n">free</span> <span class="n">rate</span>       <span class="mf">0.00</span><span class="o">%</span>       <span class="mf">0.00</span><span class="o">%</span>

 <span class="n">Total</span> <span class="n">Return</span>         <span class="mf">1992.09</span><span class="o">%</span>    <span class="mf">979.11</span><span class="o">%</span>
 <span class="n">Daily</span> <span class="n">Sharpe</span>         <span class="mf">1.00</span>        <span class="mf">0.87</span>
 <span class="n">Daily</span> <span class="n">Sortino</span>        <span class="mf">1.66</span>        <span class="mf">1.45</span>
 <span class="n">CAGR</span>                 <span class="mf">27.58</span><span class="o">%</span>      <span class="mf">20.99</span><span class="o">%</span>
 <span class="n">Max</span> <span class="n">Drawdown</span>         <span class="o">-</span><span class="mf">43.80</span><span class="o">%</span>     <span class="o">-</span><span class="mf">29.08</span><span class="o">%</span>
 <span class="n">Calmar</span> <span class="n">Ratio</span>         <span class="mf">0.63</span>        <span class="mf">0.72</span>

 <span class="n">MTD</span>                  <span class="o">-</span><span class="mf">8.14</span><span class="o">%</span>      <span class="o">-</span><span class="mf">5.53</span><span class="o">%</span>
 <span class="mi">3</span><span class="n">m</span>                   <span class="o">-</span><span class="mf">22.98</span><span class="o">%</span>     <span class="o">-</span><span class="mf">17.98</span><span class="o">%</span>
 <span class="mi">6</span><span class="n">m</span>                   <span class="o">-</span><span class="mf">23.07</span><span class="o">%</span>     <span class="o">-</span><span class="mf">23.98</span><span class="o">%</span>
 <span class="n">YTD</span>                  <span class="o">-</span><span class="mf">22.79</span><span class="o">%</span>     <span class="o">-</span><span class="mf">23.30</span><span class="o">%</span>
 <span class="mi">1</span><span class="n">Y</span>                   <span class="mf">0.40</span><span class="o">%</span>       <span class="o">-</span><span class="mf">4.42</span><span class="o">%</span>
 <span class="mi">3</span><span class="n">Y</span> <span class="p">(</span><span class="n">ann</span><span class="o">.</span><span class="p">)</span>            <span class="mf">40.64</span><span class="o">%</span>      <span class="mf">24.96</span><span class="o">%</span>
 <span class="mi">5</span><span class="n">Y</span> <span class="p">(</span><span class="n">ann</span><span class="o">.</span><span class="p">)</span>            <span class="mf">32.03</span><span class="o">%</span>      <span class="mf">31.81</span><span class="o">%</span>
 <span class="mi">10</span><span class="n">Y</span> <span class="p">(</span><span class="n">ann</span><span class="o">.</span><span class="p">)</span>           <span class="mf">22.43</span><span class="o">%</span>      <span class="mf">26.28</span><span class="o">%</span>
 <span class="n">Since</span> <span class="n">Incep</span><span class="o">.</span> <span class="p">(</span><span class="n">ann</span><span class="o">.</span><span class="p">)</span>  <span class="mf">27.58</span><span class="o">%</span>      <span class="mf">20.99</span><span class="o">%</span>

 <span class="n">Daily</span> <span class="n">Sharpe</span>         <span class="mf">1.00</span>        <span class="mf">0.87</span>
 <span class="n">Daily</span> <span class="n">Sortino</span>        <span class="mf">1.66</span>        <span class="mf">1.45</span>
 <span class="n">Daily</span> <span class="n">Mean</span> <span class="p">(</span><span class="n">ann</span><span class="o">.</span><span class="p">)</span>    <span class="mf">28.42</span><span class="o">%</span>      <span class="mf">22.34</span><span class="o">%</span>
 <span class="n">Daily</span> <span class="n">Vol</span> <span class="p">(</span><span class="n">ann</span><span class="o">.</span><span class="p">)</span>     <span class="mf">28.40</span><span class="o">%</span>      <span class="mf">25.55</span><span class="o">%</span>
 <span class="n">Daily</span> <span class="n">Skew</span>           <span class="o">-</span><span class="mf">0.10</span>       <span class="mf">0.01</span>
 <span class="n">Daily</span> <span class="n">Kurt</span>           <span class="mf">5.34</span>        <span class="mf">8.60</span>
 <span class="n">Best</span> <span class="n">Day</span>             <span class="mf">11.98</span><span class="o">%</span>      <span class="mf">14.22</span><span class="o">%</span>
 <span class="n">Worst</span> <span class="n">Day</span>            <span class="o">-</span><span class="mf">12.86</span><span class="o">%</span>     <span class="o">-</span><span class="mf">14.74</span><span class="o">%</span>

 <span class="n">Monthly</span> <span class="n">Sharpe</span>       <span class="mf">1.08</span>        <span class="mf">1.04</span>
 <span class="n">Monthly</span> <span class="n">Sortino</span>      <span class="mf">2.26</span>        <span class="mf">2.16</span>
 <span class="n">Monthly</span> <span class="n">Mean</span> <span class="p">(</span><span class="n">ann</span><span class="o">.</span><span class="p">)</span>  <span class="mf">29.20</span><span class="o">%</span>      <span class="mf">22.31</span><span class="o">%</span>
 <span class="n">Monthly</span> <span class="n">Vol</span> <span class="p">(</span><span class="n">ann</span><span class="o">.</span><span class="p">)</span>   <span class="mf">27.00</span><span class="o">%</span>      <span class="mf">21.39</span><span class="o">%</span>
 <span class="n">Monthly</span> <span class="n">Skew</span>         <span class="o">-</span><span class="mf">0.09</span>       <span class="mf">0.11</span>
 <span class="n">Monthly</span> <span class="n">Kurt</span>         <span class="o">-</span><span class="mf">0.33</span>       <span class="mf">0.41</span>
 <span class="n">Best</span> <span class="n">Month</span>           <span class="mf">21.66</span><span class="o">%</span>      <span class="mf">19.63</span><span class="o">%</span>
 <span class="n">Worst</span> <span class="n">Month</span>          <span class="o">-</span><span class="mf">18.12</span><span class="o">%</span>     <span class="o">-</span><span class="mf">15.14</span><span class="o">%</span>

 <span class="n">Yearly</span> <span class="n">Sharpe</span>        <span class="mf">0.84</span>        <span class="mf">1.04</span>
 <span class="n">Yearly</span> <span class="n">Sortino</span>       <span class="mf">4.34</span>        <span class="mf">3.73</span>
 <span class="n">Yearly</span> <span class="n">Mean</span>          <span class="mf">28.54</span><span class="o">%</span>      <span class="mf">25.14</span><span class="o">%</span>
 <span class="n">Yearly</span> <span class="n">Vol</span>           <span class="mf">33.85</span><span class="o">%</span>      <span class="mf">24.20</span><span class="o">%</span>
 <span class="n">Yearly</span> <span class="n">Skew</span>          <span class="mf">0.47</span>        <span class="o">-</span><span class="mf">0.60</span>
 <span class="n">Yearly</span> <span class="n">Kurt</span>          <span class="o">-</span><span class="mf">0.27</span>       <span class="o">-</span><span class="mf">0.18</span>
 <span class="n">Best</span> <span class="n">Year</span>            <span class="mf">88.96</span><span class="o">%</span>      <span class="mf">57.56</span><span class="o">%</span>
 <span class="n">Worst</span> <span class="n">Year</span>           <span class="o">-</span><span class="mf">22.79</span><span class="o">%</span>     <span class="o">-</span><span class="mf">23.30</span><span class="o">%</span>

 <span class="n">Avg</span><span class="o">.</span> <span class="n">Drawdown</span>        <span class="o">-</span><span class="mf">4.29</span><span class="o">%</span>      <span class="o">-</span><span class="mf">3.21</span><span class="o">%</span>
 <span class="n">Avg</span><span class="o">.</span> <span class="n">Drawdown</span> <span class="n">Days</span>   <span class="mf">29.95</span>       <span class="mf">25.20</span>
 <span class="n">Avg</span><span class="o">.</span> <span class="n">Up</span> <span class="n">Month</span>        <span class="mf">7.58</span><span class="o">%</span>       <span class="mf">5.39</span><span class="o">%</span>
 <span class="n">Avg</span><span class="o">.</span> <span class="n">Down</span> <span class="n">Month</span>      <span class="o">-</span><span class="mf">5.20</span><span class="o">%</span>      <span class="o">-</span><span class="mf">4.53</span><span class="o">%</span>
 <span class="n">Win</span> <span class="n">Year</span> <span class="o">%</span>           <span class="mf">75.00</span><span class="o">%</span>      <span class="mf">83.33</span><span class="o">%</span>
 <span class="n">Win</span> <span class="mi">12</span><span class="n">m</span> <span class="o">%</span>            <span class="mf">80.58</span><span class="o">%</span>      <span class="mf">90.65</span><span class="o">%</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># what about the drawdowns?</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">prices</span><span class="o">.</span><span class="n">to_drawdown_series</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
<a class="pynb reference internal image-reference" href="_images/intro_6_0.png"><img alt="_images/intro_6_0.png" class="pynb" src="_images/intro_6_0.png" style="width: 603px; height: 305px;" /></a>
<div class="toctree-wrapper compound">
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-brief-introduction">A Brief Introduction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quick.html#data-retrieval">Data Retrieval</a></li>
<li class="toctree-l2"><a class="reference internal" href="quick.html#data-manipulation">Data Manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="quick.html#performance-measurement">Performance Measurement</a></li>
<li class="toctree-l2"><a class="reference internal" href="quick.html#numerical-routines-and-financial-functions">Numerical Routines and Financial Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ffn.html">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ffn.html#module-ffn.__init__"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ffn</span></code> Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="ffn.html#module-ffn.core"><code class="xref py py-mod docutils literal notranslate"><span class="pre">core</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ffn.html#module-ffn.data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">data</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ffn.html#module-ffn.utils"><code class="xref py py-mod docutils literal notranslate"><span class="pre">utils</span></code> Module</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
        <aside>

            
            <a href="#" id="logo" title=ffn><img class="logo" src="_static/logo.png" width="150px" height="150px" title=ffn /></a>
            
            
            <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-brief-introduction">A Brief Introduction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="ffn.html">API</a></li>
</ul>


            
            <ul>
                <li><a href="https://github.com/pmorissette/ffn">Github</a></li>
            </ul>
            
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </aside>
    
      <div class="clearer"></div>
    </div>
        <div class="footer">
            ffn was created by Philippe Morissette.
If you find a bug, please <a href="https://github.com/pmorissette/ffn/issues/new" title="Open a new issue on Github">submit an issue</a> on Github.

        </div>

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-52308448-1', 'auto');
            ga('require', 'displayfeatures');
            ga('send', 'pageview');
        </script>
        
  </body>
</html>